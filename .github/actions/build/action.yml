name: Build WooCommerce Payments
description: Build WooCommerce Payments
inputs: 
  release-filename:
    description: "The name of the release filename"
    default: 'woocommerce-payments.zip'

runs:
  using: composite
  steps:
    - name: Build the plugin
      shell: bash
      env:
        RELEASE_FILENAME: ${{ inputs.release-filename }}
      run: |
        npm ci
        npm run build
        
        if [[ ! -f $RELEASE_FILENAME ]]; then
          echo "::error::Failed to create release archive $RELEASE_FILENAME."
          exit 1
        fi
